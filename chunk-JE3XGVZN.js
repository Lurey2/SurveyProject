import{a as te}from"./chunk-4JS7XYEA.js";import{e as M,f as D,g as I,l as H,m as K,n as Q,q as W,r as X,s as Y,t as Z,u as ee}from"./chunk-F5RIPJHK.js";import{R as k,Y as G,Z as u,aa as L,ba as A,da as V,fa as g,ha as j,ja as O,ma as B,pa as J,qa as $}from"./chunk-VZ6APWKK.js";import{$a as t,Bb as h,Ga as _,K as C,Na as c,Pa as a,Sb as T,Va as f,Y as N,Zc as q,_a as r,_c as U,ab as p,dc as F,fc as P,gb as S,gc as R,ib as x,ma as z,pb as E,qb as i,sb as y,ub as w,vb as b,ya as o}from"./chunk-2OA3MC57.js";function ie(e,n){if(e&1&&(r(0,"div",29),i(1),t()),e&2){let l=x(2);o(),y(" ",l.f.email.errors==null?null:l.f.email.errors.err," ")}}function ne(e,n){e&1&&(r(0,"div",29),i(1," Por favor ingrese su Email "),t())}function oe(e,n){e&1&&(r(0,"div",29),i(1," El formato del email no es v\xE1lido "),t())}function ae(e,n){if(e&1&&c(0,ie,2,1,"div",28)(1,ne,2,0,"div",28)(2,oe,2,0,"div",28),e&2){let l=x();f(0,l.f.email.errors!=null&&l.f.email.errors.err?0:-1),o(),f(1,l.f.email.errors!=null&&l.f.email.errors.required?1:-1),o(),f(2,l.f.email.hasError("pattern")?2:-1)}}function le(e,n){e&1&&(r(0,"span",29),i(1," Las contrase\xF1as no coinciden "),t())}function me(e,n){if(e&1&&c(0,le,2,0,"span",28),e&2){let l=x();f(0,l.form.hasError("compareError")?0:-1)}}function se(e,n){e&1&&p(0,"span",25),e&2&&a("nzType","loading")}function pe(e,n){e&1&&(r(0,"span"),i(1,"Registrase"),t())}var ue=()=>["/signIn"],Re=(()=>{let n=class n{constructor(){this.authentificationService=z(k),this.router=z(P),this.route=z(F),this.loading=_(!1),this.queryParam=_({}),this.form=new V({email:new g("",{validators:u.compose([u.required,u.pattern(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)]),nonNullable:!0}),firstName:new g("",{validators:u.required,nonNullable:!0}),lastName:new g("",{validators:u.required,nonNullable:!0}),password:new g("",{validators:u.required,nonNullable:!0}),confirmPassword:new g("",{validators:u.required,nonNullable:!0})},{validators:de()}),this.route.queryParams.subscribe(s=>{this.queryParam.set(s)})}get f(){return this.form.controls}signUp(){if(this.form.valid){this.loading.set(!0);let s=this.form.value,d={email:s.email,firstName:s.firstName,lastName:s.lastName,password:s.password};this.authentificationService.signUp(d).pipe(C(()=>this.loading.set(!1))).subscribe({next:m=>{Object.keys(this.queryParam()).length!=0?this.router.navigate([this.queryParam().redirectTo]):this.router.navigate(["/"]),this.authentificationService.storageToken(m.token)},error:m=>{m.error&&Object.keys(m.error).forEach(v=>{this.form.get(v)?.setErrors({err:m.error[v]})})}})}else te(this.form)}updateValidators(){console.log()}};n.\u0275fac=function(d){return new(d||n)},n.\u0275cmp=N({type:n,selectors:[["app-register-user"]],standalone:!0,features:[w],decls:56,vars:13,consts:[["nz-form","",3,"formGroup"],[1,"max-w-screen-md","mx-auto","w-full"],[1,"flex","justify-between","m-8","h-full","items-center","bg-white","py-8","px-4","rounded-sm","shadow"],[1,"flex-1","flex","items-center"],[1,"w-full","px-2","flex","flex-col","gap-6"],[1,"float-right","mt-2"],["src","assets/png/logo_.png","alt","Logo de pagina",1,"h-10"],[1,"font-medium","text-2xl"],[1,"text-subTittle"],["nz-row","","nzJustify","space-between",1,"w-full"],["nz-col","",3,"nzSpan"],["nzErrorTip","Por favor ingrese su Nombre"],["nz-input","","placeholder","Nombre","formControlName","firstName"],["nz-col","","nzOffset","2",3,"nzSpan"],["nzErrorTip","Por favor ingrese su apellido"],["nz-input","","placeholder","Apellido","formControlName","lastName"],[3,"nzErrorTip"],["nz-input","","type","email","placeholder","Email","formControlName","email"],["ValidatorsEmail",""],["nzErrorTip","Por favor ingrese la contrase\xF1a"],["nz-input","","type","password","placeholder","Contrase\xF1a","formControlName","password"],[3,"nzErrorTip","nzExtra"],["nz-input","","type","password","placeholder","Confirmar Contrase\xF1a","formControlName","confirmPassword"],["erroPassword",""],["type","submit",1,"w-full","cursor-pointer","bg-primary","text-white","border-0","rounded","py-2",3,"click"],["nz-icon","",3,"nzType"],[1,"text-center"],[1,"font-medium",3,"routerLink","queryParams"],["class","text-red-600"],[1,"text-red-600"]],template:function(d,m){if(d&1&&(r(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"div",5),p(7,"img",6),t(),r(8,"div",7),i(9," Registrarse "),t(),r(10,"div",8),i(11," Por favor ingrese los datos correspondiente. "),t()(),r(12,"div",9)(13,"nz-form-item",10)(14,"nz-form-label"),i(15,"Nombre"),t(),r(16,"nz-form-control",11)(17,"nz-input-group"),p(18,"input",12),t()()(),r(19,"nz-form-item",13)(20,"nz-form-label"),i(21,"Apellido"),t(),r(22,"nz-form-control",14)(23,"nz-input-group"),p(24,"input",15),t()()(),r(25,"nz-form-item",10)(26,"nz-form-label"),i(27,"E-mail"),t(),r(28,"nz-form-control",16)(29,"nz-input-group"),p(30,"input",17),t()(),c(31,ae,3,3,"ng-template",null,18,h),t(),r(33,"nz-form-item",13)(34,"nz-form-label"),i(35,"Contrase\xF1a"),t(),r(36,"nz-form-control",19)(37,"nz-input-group"),p(38,"input",20),t()()(),r(39,"nz-form-item",10)(40,"nz-form-label"),i(41,"Confirmar Contrase\xF1a"),t(),r(42,"nz-form-control",21)(43,"nz-input-group"),p(44,"input",22),t()(),c(45,me,1,1,"ng-template",null,23,h),t()(),r(47,"div")(48,"button",24),S("click",function(){return m.signUp()}),c(49,se,1,1,"span",25)(50,pe,2,0),t()(),r(51,"div",26)(52,"span"),i(53," \xBFtienes una cuenta ? "),r(54,"a",27),i(55," Iniciar Sesion"),t()()()()()()()()),d&2){let v=E(32),re=E(46);a("formGroup",m.form),o(13),a("nzSpan",11),o(6),a("nzSpan",11),o(6),a("nzSpan",11),o(3),a("nzErrorTip",v),o(5),a("nzSpan",11),o(6),a("nzSpan",11),o(3),a("nzErrorTip","Este campo es necesario")("nzExtra",re),o(7),f(49,m.loading()?49:50),o(5),a("routerLink",b(12,ue))("queryParams",m.queryParam())}},dependencies:[ee,D,M,X,W,Z,Y,I,R,T,Q,H,K,U,q,J,j,G,L,A,$,O,B],styles:["input[_ngcontent-%COMP%]{width:100%}"]});let e=n;return e})();function de(){return e=>e.get("password")?.value!==e.get("confirmPassword")?.value&&e.get("confirmPassword")?.value!=""?{compareError:!0}:null}export{Re as RegisterUserComponent,de as comparePassword};
