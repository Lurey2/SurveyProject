import{a as Y}from"./chunk-WTQNI724.js";import{e as q,f as k,g as U,l as B,m as J,n as $,q as H,r as K,s as Q,t as W,u as X}from"./chunk-AFVCIY64.js";import{_ as R,c as F,e as P,f as T,fa as M,ga as p,ja as D,ka as G,ma as I,oa as c,qa as A,sa as L,va as V,ya as j,za as O}from"./chunk-YNSZMGLT.js";import{Aa as g,Cb as N,Eb as x,Lb as E,Mb as i,Ob as w,Qa as o,Qb as S,Rb as y,Xb as _,Ya as h,hb as v,ja as C,jb as l,pb as z,ub as r,vb as t,vc as b,wb as d}from"./chunk-2NBCQCHV.js";function ee(e,n){if(e&1&&(r(0,"div",26),i(1),t()),e&2){let a=x(2);o(),w(" ",a.f.email.errors==null?null:a.f.email.errors.err," ")}}function te(e,n){e&1&&(r(0,"div",26),i(1," Por favor ingrese su Email "),t())}function re(e,n){e&1&&(r(0,"div",26),i(1," El formato del email no es v\xE1lido "),t())}function ie(e,n){if(e&1&&v(0,ee,2,1,"div",25)(1,te,2,0,"div",25)(2,re,2,0,"div",25),e&2){let a=x();z(0,a.f.email.errors!=null&&a.f.email.errors.err?0:-1),o(),z(1,a.f.email.errors!=null&&a.f.email.errors.required?1:-1),o(),z(2,a.f.email.hasError("pattern")?2:-1)}}function ne(e,n){e&1&&(r(0,"span",26),i(1," Las contrase\xF1as no coinciden "),t())}function oe(e,n){if(e&1&&v(0,ne,2,0,"span",25),e&2){let a=x();z(0,a.form.hasError("compareError")?0:-1)}}var ae=()=>["/signIn"],Ne=(()=>{let n=class n{constructor(){this.authentificationService=g(R),this.router=g(P),this.route=g(F),this.queryParam=h({}),this.form=new I({email:new c("",{validators:p.compose([p.required,p.pattern(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)]),nonNullable:!0}),firstName:new c("",{validators:p.required,nonNullable:!0}),lastName:new c("",{validators:p.required,nonNullable:!0}),password:new c("",{validators:p.required,nonNullable:!0}),confirmPassword:new c("",{validators:p.required,nonNullable:!0})},{validators:le()}),this.route.queryParams.subscribe(s=>{this.queryParam.set(s)})}get f(){return this.form.controls}signUp(){if(this.form.valid){let s=this.form.value,u={email:s.email,firstName:s.firstName,lastName:s.lastName,password:s.password};this.authentificationService.signUp(u).subscribe({next:m=>{Object.keys(this.queryParam()).length!=0?this.router.navigate([this.queryParam().redirectTo]):this.router.navigate(["/"]),this.authentificationService.storageToken(m.token)},error:m=>{m.error&&Object.keys(m.error).forEach(f=>{this.form.get(f)?.setErrors({err:m.error[f]})})}})}else Y(this.form)}updateValidators(){console.log()}};n.\u0275fac=function(u){return new(u||n)},n.\u0275cmp=C({type:n,selectors:[["app-register-user"]],standalone:!0,features:[S],decls:53,vars:12,consts:[["nz-form","",3,"formGroup"],[1,"max-w-screen-md","mx-auto","w-full"],[1,"flex","justify-between","m-8","h-full","items-center","bg-white","py-8","px-4","rounded-sm","shadow"],[1,"flex-1","flex","items-center"],[1,"w-full","px-2","flex","flex-col","gap-6"],[1,"font-medium","text-2xl"],[1,"text-subTittle"],["nz-row","","nzJustify","space-between",1,"w-full"],["nz-col","",3,"nzSpan"],["nzErrorTip","Por favor ingrese su Nombre"],["nz-input","","placeholder","Nombre","formControlName","firstName"],["nz-col","","nzOffset","2",3,"nzSpan"],["nzErrorTip","Por favor ingrese su apellido"],["nz-input","","placeholder","Apellido","formControlName","lastName"],[3,"nzErrorTip"],["nz-input","","type","email","placeholder","Email","formControlName","email"],["ValidatorsEmail",""],["nzErrorTip","Por favor ingrese la contrase\xF1a"],["nz-input","","type","password","placeholder","Contrase\xF1a","formControlName","password"],[3,"nzErrorTip","nzExtra"],["nz-input","","type","password","placeholder","Confirmar Contrase\xF1a","formControlName","confirmPassword"],["erroPassword",""],["type","submit",1,"w-full","cursor-pointer","bg-primary","text-white","border-0","rounded","py-2",3,"click"],[1,"text-center"],[1,"font-medium",3,"routerLink","queryParams"],["class","text-red-600"],[1,"text-red-600"]],template:function(u,m){if(u&1&&(r(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"div",5),i(7," Registrarse "),t(),r(8,"div",6),i(9," Por favor ingrese su email y password "),t()(),r(10,"div",7)(11,"nz-form-item",8)(12,"nz-form-label"),i(13,"Nombre"),t(),r(14,"nz-form-control",9)(15,"nz-input-group"),d(16,"input",10),t()()(),r(17,"nz-form-item",11)(18,"nz-form-label"),i(19,"Apellido"),t(),r(20,"nz-form-control",12)(21,"nz-input-group"),d(22,"input",13),t()()(),r(23,"nz-form-item",8)(24,"nz-form-label"),i(25,"E-mail"),t(),r(26,"nz-form-control",14)(27,"nz-input-group"),d(28,"input",15),t()(),v(29,ie,3,3,"ng-template",null,16,_),t(),r(31,"nz-form-item",11)(32,"nz-form-label"),i(33,"Contrase\xF1a"),t(),r(34,"nz-form-control",17)(35,"nz-input-group"),d(36,"input",18),t()()(),r(37,"nz-form-item",8)(38,"nz-form-label"),i(39,"Confirmar Contrase\xF1a"),t(),r(40,"nz-form-control",19)(41,"nz-input-group"),d(42,"input",20),t()(),v(43,oe,1,1,"ng-template",null,21,_),t()(),r(45,"div")(46,"button",22),N("click",function(){return m.signUp()}),i(47,"Registrar"),t()(),r(48,"div",23)(49,"span"),i(50," \xBFtienes una cuenta ? "),r(51,"a",24),i(52," Iniciar Sesion"),t()()()()()()()()),u&2){let f=E(30),Z=E(44);l("formGroup",m.form),o(11),l("nzSpan",11),o(6),l("nzSpan",11),o(6),l("nzSpan",11),o(3),l("nzErrorTip",f),o(5),l("nzSpan",11),o(6),l("nzSpan",11),o(3),l("nzErrorTip","Este campo es necesario")("nzExtra",Z),o(11),l("routerLink",y(11,ae))("queryParams",m.queryParam())}},dependencies:[X,k,q,K,H,W,Q,U,T,b,$,B,J,j,A,M,D,G,O,L,V],styles:["input[_ngcontent-%COMP%]{width:100%}"]});let e=n;return e})();function le(){return e=>e.get("password")?.value!==e.get("confirmPassword")?.value&&e.get("confirmPassword")?.value!=""?{compareError:!0}:null}export{Ne as RegisterUserComponent,le as comparePassword};
